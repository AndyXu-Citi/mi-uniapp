<view class="container data-v-0fe46af4"><view class="event-header data-v-0fe46af4"><image class="event-image data-v-0fe46af4" src="{{event.image}}" mode="aspectFill"></image><view class="{{['event-status','data-v-0fe46af4',statusClass]}}">{{event.status}}</view></view><view class="event-info data-v-0fe46af4"><text class="event-title data-v-0fe46af4">{{event.title}}</text><view class="event-meta data-v-0fe46af4"><view class="meta-item data-v-0fe46af4"><image class="meta-icon data-v-0fe46af4" src="/static/icons/calendar.png"></image><text class="meta-text data-v-0fe46af4">{{event.date}}</text></view><view class="meta-item data-v-0fe46af4"><image class="meta-icon data-v-0fe46af4" src="/static/icons/map.png"></image><text class="meta-text data-v-0fe46af4">{{event.location}}</text></view><view class="meta-item data-v-0fe46af4"><image class="meta-icon data-v-0fe46af4" src="/static/icons/clock.png"></image><text class="meta-text data-v-0fe46af4">{{event.startTime+" - "+event.endTime}}</text></view></view><view class="event-price data-v-0fe46af4"><text class="price-label data-v-0fe46af4">报名费：</text><text class="price-value data-v-0fe46af4">{{"¥"+event.price}}</text></view></view><view class="event-detail data-v-0fe46af4"><view class="tab-nav data-v-0fe46af4"><block wx:for="{{tabList}}" wx:for-item="tab" wx:for-index="index" wx:key="index"><view data-event-opts="{{[['tap',[['e0',['$event']]]]]}}" data-event-params="{{({index})}}" class="{{['tab-item','data-v-0fe46af4',(currentTab===index)?'active':'']}}" bindtap="__e">{{''+tab.name+''}}</view></block></view><view class="tab-content data-v-0fe46af4"><block wx:if="{{currentTab===0}}"><view class="content-section data-v-0fe46af4"><view class="section-title data-v-0fe46af4">赛事介绍</view><rich-text nodes="{{event.description}}" class="data-v-0fe46af4"></rich-text></view></block><block wx:if="{{currentTab===1}}"><view class="content-section data-v-0fe46af4"><view class="section-title data-v-0fe46af4">比赛路线</view><view class="route-info data-v-0fe46af4"><view class="route-item data-v-0fe46af4"><text class="route-label data-v-0fe46af4">起点：</text><text class="route-value data-v-0fe46af4">{{event.route.start}}</text></view><view class="route-item data-v-0fe46af4"><text class="route-label data-v-0fe46af4">终点：</text><text class="route-value data-v-0fe46af4">{{event.route.end}}</text></view><view class="route-item data-v-0fe46af4"><text class="route-label data-v-0fe46af4">总距离：</text><text class="route-value data-v-0fe46af4">{{event.route.distance+"公里"}}</text></view></view><map style="width:100%;height:300px;margin-top:20px;" latitude="{{event.latitude}}" longitude="{{event.longitude}}" markers="{{markers}}" polyline="{{polyline}}" class="data-v-0fe46af4"></map></view></block><block wx:if="{{currentTab===2}}"><view class="content-section data-v-0fe46af4"><view class="section-title data-v-0fe46af4">报名信息</view><view class="registration-info data-v-0fe46af4"><view class="info-item data-v-0fe46af4"><text class="info-label data-v-0fe46af4">报名开始：</text><text class="info-value data-v-0fe46af4">{{event.registration.startDate}}</text></view><view class="info-item data-v-0fe46af4"><text class="info-label data-v-0fe46af4">报名截止：</text><text class="info-value data-v-0fe46af4">{{event.registration.endDate}}</text></view><view class="info-item data-v-0fe46af4"><text class="info-label data-v-0fe46af4">参赛名额：</text><text class="info-value data-v-0fe46af4">{{event.registration.quota+"人"}}</text></view><view class="info-item data-v-0fe46af4"><text class="info-label data-v-0fe46af4">已报名：</text><text class="info-value data-v-0fe46af4">{{event.registration.registered+"人"}}</text></view></view></view></block></view></view><view class="bottom-bar data-v-0fe46af4"><view class="action-buttons data-v-0fe46af4"><button data-event-opts="{{[['tap',[['toggleFavorite',['$event']]]]]}}" class="btn-favorite data-v-0fe46af4" bindtap="__e"><image class="favorite-icon data-v-0fe46af4" src="{{isFavorite?'/static/icons/star-fill.png':'/static/icons/star.png'}}"></image><text class="data-v-0fe46af4">{{isFavorite?'已收藏':'收藏'}}</text></button><button class="btn-register data-v-0fe46af4" type="{{event.status==='报名中'?'primary':'default'}}" disabled="{{event.status!=='报名中'}}" data-event-opts="{{[['tap',[['goToRegistration',['$event']]]]]}}" bindtap="__e">{{''+(event.status==='报名中'?'立即报名':event.status)+''}}</button></view></view></view>