<view class="search-results-container data-v-3d6e36b4"><view class="search-header data-v-3d6e36b4"><view class="search-bar data-v-3d6e36b4"><text class="iconfont icon-search data-v-3d6e36b4"></text><input class="search-input data-v-3d6e36b4" placeholder="搜索马拉松赛事" data-event-opts="{{[['confirm',[['handleSearch',['$event']]]],['input',[['__set_model',['','keyword','$event',[]]],['handleInput',['$event']]]]]}}" value="{{keyword}}" bindconfirm="__e" bindinput="__e"/><block wx:if="{{keyword}}"><text data-event-opts="{{[['tap',[['clearKeyword',['$event']]]]]}}" class="iconfont icon-clear data-v-3d6e36b4" bindtap="__e"></text></block></view><text data-event-opts="{{[['tap',[['navigateBack',['$event']]]]]}}" class="cancel-btn data-v-3d6e36b4" bindtap="__e">取消</text></view><block wx:if="{{$root.g0}}"><view class="search-history data-v-3d6e36b4"><view class="history-header data-v-3d6e36b4"><text class="history-title data-v-3d6e36b4">搜索历史</text><text data-event-opts="{{[['tap',[['clearHistory',['$event']]]]]}}" class="clear-btn data-v-3d6e36b4" bindtap="__e"><text class="iconfont icon-delete data-v-3d6e36b4"></text></text></view><view class="history-list data-v-3d6e36b4"><block wx:for="{{searchHistory}}" wx:for-item="item" wx:for-index="index" wx:key="index"><view data-event-opts="{{[['tap',[['selectHistory',['$0'],[[['searchHistory','',index]]]]]]]}}" class="history-item data-v-3d6e36b4" bindtap="__e"><text class="history-text data-v-3d6e36b4">{{item}}</text></view></block></view></view></block><block wx:if="{{$root.g1}}"><view class="filter-bar data-v-3d6e36b4"><view data-event-opts="{{[['tap',[['changeSort',['relevance']]]]]}}" class="{{['filter-item','data-v-3d6e36b4',(sortBy==='relevance')?'active':'']}}" bindtap="__e">综合排序</view><view data-event-opts="{{[['tap',[['changeSort',['time']]]]]}}" class="{{['filter-item','data-v-3d6e36b4',(sortBy==='time')?'active':'']}}" bindtap="__e">时间排序</view><view data-event-opts="{{[['tap',[['changeSort',['price']]]]]}}" class="{{['filter-item','data-v-3d6e36b4',(sortBy==='price')?'active':'']}}" bindtap="__e">价格排序</view><view data-event-opts="{{[['tap',[['showFilterModal',['$event']]]]]}}" class="filter-item data-v-3d6e36b4" bindtap="__e"><text class="iconfont icon-filter data-v-3d6e36b4"></text>筛选</view></view></block><block wx:if="{{$root.g2}}"><scroll-view class="results-list data-v-3d6e36b4" scroll-y="{{true}}" data-event-opts="{{[['scrolltolower',[['loadMore',['$event']]]]]}}" bindscrolltolower="__e"><block wx:for="{{results}}" wx:for-item="event" wx:for-index="__i0__" wx:key="id"><event-card vue-id="{{'47d43120-1-'+__i0__}}" event="{{event}}" data-event-opts="{{[['^tap',[['goToDetail',['$0'],[[['results','id',event.id,'id']]]]]]]}}" bind:tap="__e" class="data-v-3d6e36b4" bind:__l="__l"></event-card></block><block wx:if="{{hasMore}}"><view class="load-more data-v-3d6e36b4"><block wx:if="{{loading}}"><text class="data-v-3d6e36b4">加载中...</text></block><block wx:else><text data-event-opts="{{[['tap',[['loadMore',['$event']]]]]}}" bindtap="__e" class="data-v-3d6e36b4">加载更多</text></block></view></block><block wx:else><view class="no-more data-v-3d6e36b4"><text class="data-v-3d6e36b4">没有更多了</text></view></block></scroll-view></block><block wx:else><block wx:if="{{!loading}}"><view class="empty-state data-v-3d6e36b4"><image class="empty-image data-v-3d6e36b4" src="/static/images/empty-search.png" mode="aspectFit"></image><text class="empty-text data-v-3d6e36b4">没有找到相关赛事</text><button data-event-opts="{{[['tap',[['goToDiscover',['$event']]]]]}}" class="empty-btn data-v-3d6e36b4" bindtap="__e">去发现</button></view></block></block><block wx:if="{{showFilter}}"><view class="filter-modal data-v-3d6e36b4"><view data-event-opts="{{[['tap',[['closeFilterModal',['$event']]]]]}}" class="modal-mask data-v-3d6e36b4" bindtap="__e"></view><view class="modal-content data-v-3d6e36b4"><view class="modal-header data-v-3d6e36b4"><text class="modal-title data-v-3d6e36b4">筛选条件</text><text data-event-opts="{{[['tap',[['closeFilterModal',['$event']]]]]}}" class="modal-close data-v-3d6e36b4" bindtap="__e">×</text></view><scroll-view class="modal-body data-v-3d6e36b4" scroll-y="{{true}}"><view class="filter-group data-v-3d6e36b4"><text class="group-title data-v-3d6e36b4">价格区间</text><view class="price-range data-v-3d6e36b4"><input class="price-input data-v-3d6e36b4" type="number" placeholder="最低价" data-event-opts="{{[['input',[['__set_model',['$0','minPrice','$event',[]],['filterForm']]]]]}}" value="{{filterForm.minPrice}}" bindinput="__e"/><text class="range-separator data-v-3d6e36b4">-</text><input class="price-input data-v-3d6e36b4" type="number" placeholder="最高价" data-event-opts="{{[['input',[['__set_model',['$0','maxPrice','$event',[]],['filterForm']]]]]}}" value="{{filterForm.maxPrice}}" bindinput="__e"/></view></view><view class="filter-group data-v-3d6e36b4"><text class="group-title data-v-3d6e36b4">赛事类型</text><view class="filter-options data-v-3d6e36b4"><view data-event-opts="{{[['tap',[['toggleType',['full']]]]]}}" class="{{['filter-option','data-v-3d6e36b4',($root.g3)?'active':'']}}" bindtap="__e">全程马拉松</view><view data-event-opts="{{[['tap',[['toggleType',['half']]]]]}}" class="{{['filter-option','data-v-3d6e36b4',($root.g4)?'active':'']}}" bindtap="__e">半程马拉松</view><view data-event-opts="{{[['tap',[['toggleType',['mini']]]]]}}" class="{{['filter-option','data-v-3d6e36b4',($root.g5)?'active':'']}}" bindtap="__e">迷你马拉松</view></view></view><view class="filter-group data-v-3d6e36b4"><text class="group-title data-v-3d6e36b4">举办城市</text><view class="filter-options data-v-3d6e36b4"><view data-event-opts="{{[['tap',[['e0',['$event']]]]]}}" class="{{['filter-option','data-v-3d6e36b4',(filterForm.city==='beijing')?'active':'']}}" bindtap="__e">北京</view><view data-event-opts="{{[['tap',[['e1',['$event']]]]]}}" class="{{['filter-option','data-v-3d6e36b4',(filterForm.city==='shanghai')?'active':'']}}" bindtap="__e">上海</view><view data-event-opts="{{[['tap',[['e2',['$event']]]]]}}" class="{{['filter-option','data-v-3d6e36b4',(filterForm.city==='guangzhou')?'active':'']}}" bindtap="__e">广州</view><view data-event-opts="{{[['tap',[['e3',['$event']]]]]}}" class="{{['filter-option','data-v-3d6e36b4',(filterForm.city==='shenzhen')?'active':'']}}" bindtap="__e">深圳</view></view></view></scroll-view><view class="modal-footer data-v-3d6e36b4"><button data-event-opts="{{[['tap',[['resetFilter',['$event']]]]]}}" class="reset-btn data-v-3d6e36b4" bindtap="__e">重置</button><button data-event-opts="{{[['tap',[['confirmFilter',['$event']]]]]}}" class="confirm-btn data-v-3d6e36b4" bindtap="__e">确定</button></view></view></view></block></view>